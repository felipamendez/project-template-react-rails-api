(this["webpackJsonpreact-rails-api-project-template-client"]=this["webpackJsonpreact-rails-api-project-template-client"]||[]).push([[0],{176:function(e,t,n){},177:function(e,t,n){},319:function(e,t,n){"use strict";n.r(t);var c=n(0),s=n.n(c),r=n(81),o=n.n(r),a=(n(176),n(6)),i=(n(177),n(18)),l=n(87),u=n(2);var j=function(e){var t=e.stock,n=e.currentUser,s=(e.setError,e.userStocks),r=e.setUserStocks,o=t.DisplayName,i=t.Symbol,j=t.LastValue,d=Object(c.useState)({}),b=Object(a.a)(d,2),h=b[0],O=b[1];return Object(c.useEffect)((function(){var e={name:o,symbol:i};fetch("/companies",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){O(e)}))}),[]),Object(u.jsxs)("div",{children:[Object(u.jsxs)("div",{children:[o," - ",i]}),Object(u.jsx)("div",{children:j}),Object(u.jsx)("button",{className:"button",onClick:function(){window.alert("Added to Portfolio");var e={name:o,symbol:i,price:j,company_id:h.id,user_id:n.id};console.log(e),fetch("/user_stocks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){r([].concat(Object(l.a)(s),[e]))}))},children:"Add to Portfolio"})]})};var d=function(e){var t=e.searchResponse,n=e.currentUser,s=e.userStocks,r=e.setUserStocks,o=t.Name,i=t.Symbol,j=t.LastPrice,d=Object(c.useState)({}),b=Object(a.a)(d,2),h=b[0],O=b[1],m=null===j||void 0===j?void 0:j.slice(1),p=null===m||void 0===m?void 0:m.replaceAll(",",""),f=parseFloat(p);return Object(c.useEffect)((function(){var e={name:o,symbol:i};fetch("/companies",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){O(e)})),console.log(e)}),[]),Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{children:o}),Object(u.jsx)("div",{children:i}),Object(u.jsx)("div",{children:j}),o?Object(u.jsx)("button",{className:"button",onClick:function(){window.alert("Added to Portfolio");var e={name:o,symbol:i,price:f,company_id:h.id,user_id:n.id};fetch("/user_stocks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){r([].concat(Object(l.a)(s),[e]))}))},children:"Add to Portfolio"}):null]})};var b=function(e){var t=e.currentUser,n=e.userStocks,s=e.setUserStocks,r=Object(c.useState)(""),o=Object(a.a)(r,2),i=o[0],l=o[1],j=Object(c.useState)(null),b=Object(a.a)(j,2),h=b[0],O=b[1];return console.log(h),Object(u.jsxs)("div",{children:[Object(u.jsxs)("form",{className:"form",onSubmit:function(e){e.preventDefault(),fetch("https://schwab.p.rapidapi.com/quote/get-summary?symbol=".concat(i),{method:"GET",headers:{"X-RapidAPI-Host":"schwab.p.rapidapi.com","X-RapidAPI-Key":"021dd30916msh995e8fc51eac598p1583b2jsnc31726cbdd01"}}).then((function(e){return e.json()})).then((function(e){return O(e.QuoteOutput)})).catch((function(e){return console.error(e)}))},children:[Object(u.jsx)("label",{children:"Find a stock"}),Object(u.jsx)("input",{type:"text",placeholder:"Enter a symbol",onChange:function(e){return l(e.target.value)}}),Object(u.jsx)("input",{className:"button",type:"submit",value:"Search"})]}),h?Object(u.jsx)(d,{currentUser:t,userStocks:n,setUserStocks:s,searchResponse:h}):null]})};var h=function(e){var t=e.currentUser,n=e.userStocks,s=e.setUserStocks,r=Object(c.useState)([]),o=Object(a.a)(r,2),i=o[0],l=o[1],d=Object(c.useState)([]),h=Object(a.a)(d,2),O=h[0],m=h[1];Object(c.useEffect)((function(){fetch("https://schwab.p.rapidapi.com/market/get-top-mentions",{method:"GET",headers:{"X-RapidAPI-Host":"schwab.p.rapidapi.com","X-RapidAPI-Key":"021dd30916msh995e8fc51eac598p1583b2jsnc31726cbdd01"}}).then((function(e){return e.json()})).then((function(e){return l(e.TopMentionsApiData)})).catch((function(e){return console.error(e)}))}),[]),Object(c.useEffect)((function(){fetch("https://schwab.p.rapidapi.com/news/get-market-update",{method:"GET",headers:{"X-RapidAPI-Host":"schwab.p.rapidapi.com","X-RapidAPI-Key":"021dd30916msh995e8fc51eac598p1583b2jsnc31726cbdd01"}}).then((function(e){return e.json()})).then((function(e){return m(e)})).catch((function(e){return console.error(e)}))}),[]),console.log(O);var p=null===i||void 0===i?void 0:i.map((function(e){return Object(u.jsx)("div",{className:"stock-card",children:Object(u.jsx)(j,{currentUser:t,stock:e,userStocks:n,setUserStocks:s})})}));return Object(u.jsxs)("div",{className:"stock-cards-container",children:[Object(u.jsx)(b,{currentUser:t,userStocks:n,setUserStocks:s}),Object(u.jsx)("h1",{children:"Featured"}),p,Object(u.jsx)("h1",{children:"News"}),Object(u.jsxs)("div",{className:"stock-card",children:[Object(u.jsx)("strong",{children:Object(u.jsx)("div",{children:O.Headline})}),Object(u.jsx)("div",{children:O.Timestamp}),Object(u.jsx)("div",{children:O.Teaser})]})]})};var O=function(e){var t=e.error,n=e.setError,s=e.setCurrentUser,r=Object(c.useState)(""),o=Object(a.a)(r,2),l=o[0],j=o[1],d=Object(c.useState)(""),b=Object(a.a)(d,2),h=b[0],O=b[1],m=Object(i.f)();return Object(u.jsx)("div",{className:"login-container",children:Object(u.jsx)("div",{className:"login-box",children:Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault(),fetch("/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:l,password:h})}).then((function(e){return e.json()})).then((function(t){t.error?(n(t.error),e.target.className="shake",setInterval((function(){e.target.className="login-form"}),500)):(n(null),console.log("Login Success"),m.push("/"),s(t))}))},className:"login-form",children:[Object(u.jsx)("div",{className:"login-input-div",children:Object(u.jsx)("input",{className:"login-input",onChange:function(e){j(e.target.value)},placeholder:"Enter username",type:"text",value:l})}),Object(u.jsx)("div",{className:"login-input-div",children:Object(u.jsx)("input",{className:"login-input",onChange:function(e){O(e.target.value)},placeholder:"Enter password",type:"password",value:h})}),Object(u.jsx)("div",{className:"login-button-div",children:Object(u.jsx)("button",{className:"button",type:"submit",children:" Log in "})}),Object(u.jsx)("p",{className:"error",children:t||null})]})})})};var m=function(e){var t=e.setCurrentUser,n=Object(c.useState)(""),s=Object(a.a)(n,2),r=s[0],o=s[1],l=Object(c.useState)(""),j=Object(a.a)(l,2),d=j[0],b=j[1],h=Object(c.useState)(""),O=Object(a.a)(h,2),m=O[0],p=O[1],f=Object(c.useState)(null),v=Object(a.a)(f,2),x=v[0],S=v[1],g=Object(i.f)();return Object(u.jsx)("div",{className:"login-container",children:Object(u.jsx)("div",{className:"login-box",children:Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault(),fetch("/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:r,password:m,email:d})}).then((function(e){return e.json()})).then((function(n){console.log(n.errors),n.errors?(S(n.errors),e.target.className="shake",setInterval((function(){e.target.className="login-form"}),500)):(S(null),console.log("Signup Success"),g.push("/portfolio"),t(n))}))},className:"login-form",children:[Object(u.jsx)("div",{className:"login-input-div",children:Object(u.jsx)("input",{className:"login-input",onChange:function(e){o(e.target.value)},placeholder:"Enter username",type:"text",value:r})}),Object(u.jsx)("div",{className:"login-input-div",children:Object(u.jsx)("input",{className:"login-input",onChange:function(e){b(e.target.value)},placeholder:"Enter email",type:"text",value:d})}),Object(u.jsx)("div",{className:"login-input-div",children:Object(u.jsx)("input",{className:"login-input",onChange:function(e){p(e.target.value)},placeholder:"Enter password",type:"password",value:m})}),Object(u.jsx)("div",{className:"login-button-div",children:Object(u.jsx)("button",{className:"button",type:"submit",children:" Sign Up "})}),Object(u.jsx)("p",{className:"error",children:x||null})]})})})},p=n(321),f=n(325),v=n(164),x=n(165),S=n(73),g=n(70),y=n(167);var k=function(e){var t=e.values2,n=e.keys,s=e.symbol,r=Object(c.useState)([]),o=Object(a.a)(r,2),i=o[0],l=o[1];Object(c.useEffect)((function(){l([{date:n[6],close:t[6]["4. close"]},{date:n[5],close:t[5]["4. close"]},{date:n[4],close:t[4]["4. close"]},{date:n[3],close:t[3]["4. close"]},{date:n[2],close:t[2]["4. close"]},{date:n[1],close:t[1]["4. close"]},{date:n[0],close:t[0]["4. close"]}])}),[]);var j=Object(u.jsxs)(p.a,{width:400,height:400,data:i,children:[Object(u.jsx)(f.a,{strokeDasharray:"5 5"}),Object(u.jsx)(v.a,{dataKey:"date"}),Object(u.jsx)(x.a,{}),Object(u.jsx)(S.a,{}),Object(u.jsx)(g.a,{}),Object(u.jsx)(y.a,{type:"monotone",dataKey:"close",stroke:"#8884d8"})]});return Object(u.jsxs)("div",{children:[s,j]})},N=n(107);var w=function(e){var t=e.stock,n=e.handleDeleteStock,s=e.setUserStocks,r=e.userStocks,o=e.currentUser,i=t.name,l=t.symbol,j=t.price,d=t.id,b=Object(c.useState)(!1),h=Object(a.a)(b,2),O=h[0],m=h[1],p=Object(c.useState)([]),f=Object(a.a)(p,2),v=(f[0],f[1]),x=Object(c.useState)(""),S=Object(a.a)(x,2),g=S[0],y=S[1],w=Object(c.useState)(null),E=Object(a.a)(w,2),P=E[0],C=E[1],U=Object(c.useState)(!1),T=Object(a.a)(U,2),A=T[0],_=T[1],I=Object(c.useState)(null),D=Object(a.a)(I,2),R=D[0],H=D[1],L=Object(c.useState)([]),X=Object(a.a)(L,2),J=X[0],F=X[1],M=Object(c.useState)([]),K=Object(a.a)(M,2),q=K[0],G=K[1],B=Object(c.useState)(null),W=Object(a.a)(B,2),Q=W[0],V=W[1];Object(c.useEffect)((function(){fetch("/user_stocks/".concat(d)).then((function(e){return e.json()})).then((function(e){return C(e)}))}),[]),Object(c.useEffect)((function(){fetch("https://schwab.p.rapidapi.com/quote/get-summary?symbol=".concat(l),{method:"GET",headers:{"X-RapidAPI-Host":"schwab.p.rapidapi.com","X-RapidAPI-Key":"021dd30916msh995e8fc51eac598p1583b2jsnc31726cbdd01"}}).then((function(e){return e.json()})).then((function(e){var t,n=null===(t=e.QuoteOutput.LastPrice)||void 0===t?void 0:t.slice(1),c=null===n||void 0===n?void 0:n.replaceAll(",",""),s=parseFloat(c);V(s)})).catch((function(e){return console.error(e)}))}),[]);var $=Q-j,z={to_name:null===o||void 0===o?void 0:o.username,email:null===o||void 0===o?void 0:o.email,name:i,symbol:l,price:j,performance:$};return Object(u.jsxs)("div",{children:[Object(u.jsxs)("div",{children:["Name: ",l," - ",i," "]}),Object(u.jsxs)("div",{children:["Initial Purchasing Price: $",j]}),Object(u.jsxs)("div",{children:["Price Change Since Purchase: $ ",$.toFixed(2)]}),Object(u.jsx)("button",{className:"button",onClick:function(){fetch("/user_stocks/".concat(d),{method:"DELETE"}).then((function(e){n(d)}))},children:"Delete Stock"}),Object(u.jsx)("div",{}),Object(u.jsx)("button",{className:"button",onClick:function(){m(!0),O||fetch("https://www.alphavantage.co/query?function=TIME_SERIES_DAILY&symbol=".concat(l,"&apikey=").concat("021dd30916msh995e8fc51eac598p1583b2jsnc31726cbdd01"),{method:"GET",headers:{"User-Agent":"request"}}).then((function(e){return e.json()})).then((function(e){if(e["Time Series (Daily)"]){console.log("response",e["Time Series (Daily)"]),v(e["Time Series (Daily)"]);var t=null===Object||void 0===Object?void 0:Object.values(e["Time Series (Daily)"]);F(null===Object||void 0===Object?void 0:Object.values(t)),G(null===Object||void 0===Object?void 0:Object.keys(e["Time Series (Daily)"]))}})),m(!O)},children:"Show Weekly Prices"}),Object(u.jsx)("div",{}),Object(u.jsx)("button",{className:"button",onClick:function(){_(!A)},children:"Update Initial Price"}),A?Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t={name:i,symbol:l,price:g,company_id:null===P||void 0===P?void 0:P.company.id,user_id:null===P||void 0===P?void 0:P.user.id};fetch("/user_stocks/".concat(d),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){if(e.errors)H(e.errors);else{var t=r.map((function(t){return t.id===e.id?e:t}));s(t),H(null),y(""),_(!1)}}))},children:["Update Purchase Price:",Object(u.jsx)("input",{onChange:function(e){return y(e.target.value)},defaultValue:"Price",type:"text"}),Object(u.jsx)("input",{className:"button",type:"submit",value:"Update"})]}):null,Object(u.jsx)("div",{}),Object(u.jsx)("p",{className:"error",children:R||null}),J.length>0&&q.length>0&&O?Object(u.jsx)(k,{symbol:l,keys:q,values2:J}):null,Object(u.jsx)("button",{className:"button",onClick:function(){N.a.send("service_vxw2zxa","template_yv10tap",z,"ohTqmInxZvPh4daoW").then((function(e){alert("Message Sent, We will get back to you shortly",e.text),console.log(e)}),(function(e){alert("An error occurred, Please try again",e.text),console.log(e)}))},children:"Email Me Stock Performance"})]})};var E=function(e){var t=e.userStocks,n=e.setUserStocks,s=e.error,r=e.setError,o=Object(c.useState)({}),l=Object(a.a)(o,2),j=l[0],d=l[1],b=Object(i.f)();function h(e){var c=t.filter((function(t){return t.id!==e}));n(c)}return Object(c.useEffect)((function(){fetch("/current_user").then((function(e){return e.json()})).then((function(e){e.error?b.push("/login"):(n(e.user_stocks),d(e))}))}),[]),Object(u.jsxs)("div",{className:"stock-cards-container",children:[Object(u.jsx)("h1",{children:"My Portfolio"}),null===t||void 0===t?void 0:t.map((function(e){return Object(u.jsx)("div",{className:"stock-card",children:Object(u.jsx)(w,{stock:e,handleDeleteStock:h,error:s,setError:r,setUserStocks:n,userStocks:t,currentUser:j})})}))]})},P=n(25);var C=function(e){var t=e.currentUser,n=e.setCurrentUser,c=Object(i.f)();function s(){return t&&!t.error}return console.log(t),Object(u.jsxs)("div",{className:"navbar",children:[Object(u.jsx)("div",{className:"nav-left",children:Object(u.jsx)(P.b,{to:s()?"/":"/login",className:"nav-link",children:Object(u.jsx)("h2",{className:"navbar-item",onClick:function(){t||window.alert("Please login to access site")},children:"Featured"})})}),Object(u.jsxs)("div",{className:"nav-right",children:[s()?Object(u.jsxs)("h2",{className:"navbar-item",children:[" Hi, ",t.username,"! "]}):Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(P.b,{to:"/login",className:"nav-link",children:Object(u.jsx)("h2",{className:"navbar-item",children:"Login"})}),Object(u.jsx)(P.b,{to:"/signup",className:"nav-link",children:Object(u.jsx)("h2",{className:"navbar-item",children:"Sign Up"})})]}),s()?Object(u.jsx)(P.b,{to:s()?"/portfolio":"/login",className:"nav-link",children:s()?Object(u.jsx)("h2",{className:"navbar-item",children:"My Portfolio"}):null}):null,s()?Object(u.jsx)(P.b,{to:s()?"/mycompanies":"/login",className:"nav-link",children:s()?Object(u.jsx)("h2",{className:"navbar-item",children:"My Companies"}):null}):null,s()?Object(u.jsx)("h2",{className:"navbar-item",onClick:function(){fetch("/logout",{method:"DELETE"}).then((function(e){e.ok&&(c.push("/login"),n(null))}))},children:"Logout"}):null]})]})};var U=function(e){var t=e.company,n=t.name,s=t.symbol,r=Object(c.useState)(null),o=Object(a.a)(r,2),i=o[0],l=o[1],j=Object(c.useState)(!1),d=Object(a.a)(j,2),b=d[0],h=d[1],O=Object(c.useState)(!1),m=Object(a.a)(O,2),p=m[0],f=m[1];return Object(c.useEffect)((function(){fetch("https://schwab.p.rapidapi.com/quote/get-summary?symbol=".concat(s),{method:"GET",headers:{"X-RapidAPI-Host":"schwab.p.rapidapi.com","X-RapidAPI-Key":"021dd30916msh995e8fc51eac598p1583b2jsnc31726cbdd01"}}).then((function(e){return e.json()})).then((function(e){return l(e)})).catch((function(e){return console.error(e)}))}),[]),Object(u.jsxs)("div",{children:[Object(u.jsxs)("strong",{children:[Object(u.jsx)("div",{children:n}),Object(u.jsx)("div",{children:s})]}),Object(u.jsx)("button",{className:"button",onClick:function(){return h(!b)},children:b?"Hide Business Summary":"Show Business Summary"}),b?Object(u.jsx)("div",{children:null===i||void 0===i?void 0:i.CompanyOverviewOutput.BusinessSummary}):null,Object(u.jsx)("div",{}),Object(u.jsx)("button",{className:"button",onClick:function(){return f(!p)},children:p?"Hide Company News Summary":"Show Company News Summary"}),p?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("div",{children:Object(u.jsx)("strong",{children:null===i||void 0===i?void 0:i.StocksNewsOutput.Stories[1].Headline})}),Object(u.jsx)("div",{children:null===i||void 0===i?void 0:i.StocksNewsOutput.Stories[1].Teaser}),Object(u.jsx)("div",{}),Object(u.jsx)("div",{children:Object(u.jsx)("strong",{children:null===i||void 0===i?void 0:i.StocksNewsOutput.Stories[0].Headline})}),Object(u.jsx)("div",{children:null===i||void 0===i?void 0:i.StocksNewsOutput.Stories[0].Teaser})]}):null]})};var T=function(){var e=Object(c.useState)([]),t=Object(a.a)(e,2),n=t[0],s=t[1],r=Object(i.f)();Object(c.useEffect)((function(){fetch("/current_user").then((function(e){return e.json()})).then((function(e){e.error?r.push("/login"):s(e.companies)}))}),[]),console.log(n);var o=null===n||void 0===n?void 0:n.map((function(e){return Object(u.jsx)("div",{className:"stock-card",children:Object(u.jsx)(U,{company:e})})}));return Object(u.jsx)("div",{className:"stock-cards-container",children:o})};var A=function(){var e=Object(c.useState)(null),t=Object(a.a)(e,2),n=t[0],s=t[1],r=Object(c.useState)(null),o=Object(a.a)(r,2),l=o[0],j=o[1],d=Object(c.useState)([]),b=Object(a.a)(d,2),p=b[0],f=b[1];return Object(c.useEffect)((function(){fetch("/current_user").then((function(e){return e.json()})).then((function(e){s(e||null)}))}),[]),Object(c.useEffect)((function(){fetch("/current_user").then((function(e){return e.json()})).then((function(e){return f(e.user_stocks)}))}),[]),Object(u.jsxs)("div",{className:"App",children:[Object(u.jsx)(C,{currentUser:n,setCurrentUser:s}),Object(u.jsxs)(i.c,{children:[Object(u.jsx)(i.a,{exact:!0,path:"/",children:Object(u.jsx)(h,{currentUser:n,userStocks:p,setUserStocks:f})}),Object(u.jsx)(i.a,{exact:!0,path:n?"/portfolio":"login",children:Object(u.jsx)(E,{error:l,setError:j,userStocks:p,setUserStocks:f})}),Object(u.jsx)(i.a,{exact:!0,path:"/login",children:Object(u.jsx)(O,{error:l,setError:j,setCurrentUser:s})}),Object(u.jsx)(i.a,{exact:!0,path:"/signup",children:Object(u.jsx)(m,{error:l,setError:j,setCurrentUser:s})}),Object(u.jsx)(i.a,{children:Object(u.jsx)(T,{exact:!0,path:"/mycompanies"})})]})]})};o.a.render(Object(u.jsx)(s.a.StrictMode,{children:Object(u.jsx)(P.a,{children:Object(u.jsx)(A,{})})}),document.getElementById("root"))}},[[319,1,2]]]);
//# sourceMappingURL=main.3ee836a0.chunk.js.map